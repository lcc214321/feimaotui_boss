<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      xmlns:shiro="http://www.pollix.at/thymeleaf/shiro">
<head>
    <meta charset="utf-8"/>
    <meta http-equiv="X-UA-Compatible" content="IE=edge"/>
    <!-- Tell the browser to be responsive to screen width -->
    <meta content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no" name="viewport"/>
    <script th:inline="javascript">
        var basePath = [[${#request.getContextPath()}]];
    </script>
    <div th:replace="~{base/js-bar :: js-bar}"></div>
<style>
    .onlyRead {
        background-color: #e0d7d7 !important;
    }
</style>
</head>
<body>
<div class="box box-primary box-solid">
    <div class="box-header  with-border">
        <h6 class="box-title">汇总管理 </h6>
        <div class="box-tools pull-right">
            <button type="button" class="btn btn-box-tool" data-widget="collapse"><i class="fa fa-minus"></i>
            </button>
        </div>
    </div>
    <div class="box-body">
        <form class="form-horizontal" id="search-approval-control-form">
            <fieldset>


                <div class="form-group">
                    <label class="col-sm-1 control-label" id="basic-searchon2">业务员</label>
                    <div class="col-sm-2">
                        <input type="text" class="form-control" id="userName" name="userName"/>
                    </div>

                    <label class="col-sm-1 control-label">记录类型</label>
                    <div class="col-sm-2">
                        <select class="form-control"  name="recordType">
                            <option value="" >请选择</option>
                            <option value="进货" >进货</option>
                            <option value="销售" >销售</option>
                        </select>
                    </div>

                    <label class="col-sm-1 control-label">供应商</label>
                    <div class="col-sm-2">
                        <input type="text" class="form-control" id="merchant" name="merchant"/>
                    </div>


                </div>
                <div class="form-group">
                    <label class="col-sm-1 control-label">客户</label>
                    <div class="col-sm-2">
                        <input type="text" class="form-control" id="consumer" name="consumer"/>
                    </div>
                    <label class="col-sm-1 control-label">纸种</label>
                    <div class="col-sm-2">
                        <input type="text" class="form-control" id="paperType" name="paperType"/>
                    </div>
                </div>
                <div class="form-group row col-md-4">
                    <label for="startTimeQuery" class="col-sm-5 col-form-label"><span>创建时间</span>:</label>
                    <div class="col-sm-7 input-append date form_datetime">
                        <input type="text" class="form-control form_datetime " id="startTimeQuery" name="startTime"
                               readonly>
                        <span class="add-on"><i class="icon-th"></i></span>
                    </div>
                </div>
                <div class="form-group row col-md-4">
                    <label for="endTimeQuery" class="col-sm-2 col-form-label">--</label>
                    <div class="col-sm-7 input-append date form_datetime">
                        <input type="text" class="form-control form_datetime" id="endTimeQuery" name="endTime" readonly>
                        <span class="add-on"><i class="icon-th"></i></span>
                    </div>
                </div>
                <div class="form-group" align="center">
                    <button type="button" class="btn btn-primary" id="search-approval-control-btton"><i
                            class="fa fa-search"></i>&nbsp; 查询
                    </button>
                    <button type="button" class="btn btn-primary" id="reset-approval-control-btton"><i
                            class="fa fa-undo"></i>&nbsp; 重置
                    </button>

                </div>
            </fieldset>
        </form>
    </div>
</div>
<div class="panel panel-default" style="margin-bottom: 0px">
    <div class="panel-body">
        <div id="approval-control-toolbar">
            <button id="export-approval-control-btton" class="btn btn-warning"  data-toggle="modal"
            >
                <i class="fa fa-edit"></i> 导出报表
            </button>
        </div>
        <table id="approval-control-table"
               data-toggle="table"
               data-toolbar="#approval-control-toolbar"
               data-id-field="id"
               data-ajax="dataList"
               data-show-refresh="true"
               data-show-columns="true"
               data-page-list="[5,10, 20, 50, 100, 200]"
               data-page-size="10"
               data-side-pagination="server"
               data-row-style="rowStyle"
               data-pagination="true"
               >
            <thead>
            <tr>
                <th data-field="state" data-radio="true" ></th>
                <th data-align="center" data-valign="middle" data-formatter="formatter">
                    序号
                </th>
                <th data-field="paperType" data-align="center" data-valign="middle">纸种</th>
                <th data-field="userName" data-align="center" data-valign="middle">业务员</th>
                <th data-field="recordType" data-align="center" data-valign="middle">记录类型
                </th>
                <th data-field="weight" data-align="center" data-valign="middle">
                    克重（g）
                </th>
                <th data-field="standard" data-align="center" data-valign="middle">规格（mm）</th>
                <th data-field="sumnum" data-align="center" data-valign="middle">数量汇总（T)</th>
                <th data-field="sumtotalMoney" data-align="center" data-valign="middle">总金额汇总（元）</th>
            </tr>
            </thead>
        </table>
    </div>
</div>
<!--弹窗model-->
<div class="modal fade" id="confirmDiv" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-body">
                <form>
                    <input type="hidden" id="confirmType"/>
                    <div class="form-group"><label class="control-label" id="alertDeleteDesc">确定要删除此记录？</label></div>
                </form>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-default" data-dismiss="modal">返回
                </button>
                <button type="button" class="btn btn-primary" id="doubleConfirm">确认
                </button>
            </div>
        </div>
    </div>
</div>
<script th:src="@{/js/pages/recordSum.js}"></script>
<script th:src="@{/js/jquery.form.js}"></script>
<!--<script th:src="@{/js/pages/recordSum.validator.js}"></script>-->
<!-- Page script -->

<script>
    $(function () {
        initApprovalControlPage();
    });
    //初始化查询时间
    $('#startTimeQuery').datetimepicker({
        language:  'zh-CN',
        weekStart: 1,
        todayBtn:  1,
        autoclose: 1,
        todayHighlight: 1,
        startView: 2,
        forceParse: 0,
        showMeridian: 1
    });
    $('#endTimeQuery').datetimepicker({
        language:  'zh-CN',
        weekStart: 1,
        todayBtn:  1,
        autoclose: 1,
        todayHighlight: 1,
        startView: 2,
        forceParse: 0,
        showMeridian: 1
    });
    function formatter(value, row, index) {
        var pageSize=$('#approval-control-table').bootstrapTable('getOptions').pageSize;//通过表的#id 可以得到每页多少条
        var pageNumber=$('#approval-control-table').bootstrapTable('getOptions').pageNumber;//通过表的#id 可以得到当前第几页
        return pageSize * (pageNumber - 1) + index + 1;//返回每条的序号： 每页条数 * （当前页 - 1 ）+ 序号
    }
    function dateFormatter(value, row, index) {
        if (!value) {
            return value;
        }
//        加8小时
        var dateVal = new Date(new Date(value).getTime());
        var year = dateVal.getFullYear();
        var month = dateVal.getMonth() + 1;
        var date = dateVal.getDate();
        var hour = dateVal.getHours();
        var minute = dateVal.getMinutes();
        var second = dateVal.getSeconds();

        year = year < 10 ? '0' + year : year;
        month = month < 10 ? '0' + month : month;
        date = date < 10 ? '0' + date : date;
        hour = hour < 10 ? '0' + hour : hour;
        minute = minute < 10 ? '0' + minute : minute;
        second = second < 10 ? '0' + second : second;
        // commonTime = dateVal.toString();
        commonTime = year+"-"+month+"-"+date+" "+hour + ":" + minute + ":" + second;
        return commonTime;
    }
</script>
</body>
</html>
